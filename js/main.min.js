function preload(){game.load.image("sky","assets/sky.png"),game.load.image("sky2","assets/sky2.png"),game.load.image("sky3","assets/sky3.png"),game.load.image("ground","assets/ground.png"),game.load.image("cloud","assets/cloud.png"),game.load.image("bee","assets/bee.png"),game.load.spritesheet("grass","assets/grass.png",208,73),game.load.spritesheet("rabbit","assets/rabbit_jump2.png",87,144)}function create(){game.add.sprite(-1,2057,"sky"),game.add.sprite(-1,1500,"sky2"),game.add.sprite(-1,900,"sky3"),game.world.setBounds(0,0,50,2800),clouds=game.add.group(),clouds.enableBody=!0,clouds.physicsBodyType=Phaser.Physics.ARCADE;for(var a=0;3>a;a++){var b;for(b=0;b<clouds.length;b++)var c=clouds.getAt(b).body.x=1e3*Math.random();var d=clouds.create(c,2100+80*a,"cloud");d.checkWorldBounds=!0,d.events.onOutOfBounds.add(cloudLoop,this);var e=.75*Math.random()+.25;d.scale.setTo(e,e),d.body.velocity.x=10*e}grass=game.add.sprite(0,2535,"grass"),grass.animations.add("anim",[1,2],2,!0),grass.animations.play("anim"),grass2=game.add.sprite(200,2535,"grass"),grass2.animations.add("anim",[1,2],2,!0),grass2.animations.play("anim"),bees=game.add.group(),bees.enableBody=!0,bees.physicsBodyType=Phaser.Physics.ARCADE;var f=bees.create(0,2500,"bee");f.checkWorldBounds=!0,f.events.onOutOfBounds.add(beeLoop,this),f.scale.setTo(.2,.2),f.body.velocity.x=300,ground=game.add.sprite(0,game.world.height-200,"ground"),game.physics.arcade.enable(ground),ground.scale.setTo(1,1),ground.body.immovable=!0,player=game.add.sprite(115,game.world.height-340,"rabbit"),game.physics.arcade.enable(player),player.body.gravity.y=1e3,game.camera.follow(player),this.click=game.input.onDown,this.click.add(jump),scoreText=game.add.text(32,32,""+score,{fontSize:"92px",fill:"white"}),bestScoreText=game.add.text(260,32,""+localStorage.getItem("previousBest"),{fontSize:"92px",fill:"red"}),bestScoreText.fixedToCamera=!0,scoreText.fixedToCamera=!0,backgroundMusic=game.add.audio("background",1,!0),backgroundMusic.play("",0,1,!0),jumpSound=game.add.audio("jump")}function update(){game.physics.arcade.collide(player,ground),2456-player.y>score&&(scoreText.text=(score/10).toFixed(0)),2456-player.y>previousBest&&(previousBest=score,bestScoreText.text=(score/10).toFixed(0)),score=2456-player.y,score>localStorage.getItem("previousBest")&&localStorage.setItem("previousBest",score),2456==player.y&&(timesBounced=1,scoreText.text=0,firstBounce=!0),now=player.y,now>then?(player.animations.add("fall",[2],5,!0),rising=!1):then>now?(player.animations.add("jump",[1],5,!0),rising=!0):(player.animations.add("stand",[0],5,!0),rising=!1),then=now}function jump(){if(this.rabbitY=player.y,player.y>=this.upperBound&&player.y<=2456){var a=player.y-2456;if(this.timesBounced=this.timesBounced+1,1==this.firstBounce){var b=this.firstBounceVelocity;this.firstBounce=!1,this.upperBound=2356}else if(this.timesBounced>1){this.upperBound=this.upperBound-10;var c=500+a-300,b=this.currentVelocity-c}this.currentVelocity=b,0==this.rising&&(player.body.velocity.y=b)}else this.timesBounced=1,this.firstBounce=!0,console.log(this.timesBounced+" out of bounds");jumpSound.play()}function cloudLoop(a){a.reset(-100,a.y);var b=.75*Math.random()+.25;a.scale.setTo(b,b),a.body.velocity.x=10*b}function beeLoop(a){a.reset(-10,a.y),a.body.velocity.x=300}function render(){}var game=new Phaser.Game(320,600,Phaser.AUTO,"game",{preload:preload,create:create,update:update,render:render}),player,ground,clouds,bees,backgroundMusic,timer,scoreText,bestScoreText,score=0,firstBounceVelocity=-400,standardBounce=200,firstBounce=!0;this.timesBounced=1,this.rabbitY=1,this.upperBound=2356,this.rising=!1;var previousBest=0,now=0,then=0;